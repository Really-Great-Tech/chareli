<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- Favicons for browser tabs and Google Search (requires 48x48 minimum) -->
    <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <!-- Apple Touch Icon for iOS -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <!-- Web App Manifest for PWA -->
    <link rel="manifest" href="/site.webmanifest">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />

    <!-- Resource Hints: Enable early connections to critical origins -->
    <!-- Google Analytics - MIGRATED TO ZARAZ -->
    <!-- <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin> -->
    <!-- <link rel="dns-prefetch" href="https://www.googletagmanager.com"> -->

    <!-- Facebook Pixel -->
    <link rel="preconnect" href="https://connect.facebook.net" crossorigin>
    <link rel="dns-prefetch" href="https://connect.facebook.net">

    <!-- Performance: Preconnect to critical origins -->
    <!-- API for data fetching (90ms LCP savings) -->
    <link rel="preconnect" href="https://api.arcadesbox.com" crossorigin>

    <!-- Google Fonts - only gstatic needed for font files -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- CDN (for production) - Preconnect for faster image loading -->
    <link rel="preconnect" href="https://cdn.arcadesbox.org" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.arcadesbox.org">

    <!-- Cloudflare Image Resizing (if using transformations) -->
    <link rel="preconnect" href="https://cdn.arcadesbox.org/cdn-cgi" crossorigin>

    <title>Arcades Box - Play Free Online Arcade and Puzzle Games</title>
    <meta name="description" content="Play free online arcade, puzzle, sports and action games on Arcades Box. Instant play, no downloads, and new games added regularly." />
    <link rel="canonical" href="https://www.arcadesbox.com/" />

    <!-- Preload Critical Resources -->
    <link rel="modulepreload" href="/src/main.tsx">
    <link rel="preload" href="/src/index.css" as="style">

    <!-- Preload Critical Fonts (WOFF2) -->
    <link rel="preload" href="/src/fonts/woff2/dm-mono-regular.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/src/fonts/woff2/work-sans-regular.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/src/fonts/woff2/jersey-25-regular.woff2" as="font" type="font/woff2" crossorigin>


    <!-- Analytics Domain Check -->
    <script>
      // Only enable analytics on production domains
      const ANALYTICS_ENABLED_DOMAINS = [
        "www.arcadesbox.com",
        "arcadesbox.com",
      ];

      const hostname = window.location.hostname;
      const shouldLoadAnalytics = ANALYTICS_ENABLED_DOMAINS.includes(hostname);

      // Log for debugging in non-production environments
      if (!shouldLoadAnalytics) {
        console.log("[Analytics] Tracking disabled on:", hostname);
      }

      // Make this available globally for the AnalyticsTracker component
      window.shouldLoadAnalytics = shouldLoadAnalytics;
    </script>

    <!-- Google tag (gtag.js) - MIGRATED TO ZARAZ -->
    <!-- <script defer>
      // Defer analytics loading until after page is interactive
      window.addEventListener('load', function () {
        setTimeout(function () {
          if (window.shouldLoadAnalytics) {
            // Load Google Analytics script
            const gaScript = document.createElement("script");
            gaScript.async = true;
            gaScript.src =
              "https://www.googletagmanager.com/gtag/js?id=G-M661H945TQ";
            document.head.appendChild(gaScript);

            // Initialize Google Analytics
            window.dataLayer = window.dataLayer || [];
            function gtag() {
              dataLayer.push(arguments);
            }
            gtag("js", new Date());
            gtag("config", "G-M661H945TQ");

            console.log("[Analytics] Google Analytics enabled");
          }
        }, 2000); // 2 second delay
      });
    </script> -->

    <!-- Facebook Pixel Code - Deferred Loading for Better Performance -->
    <script defer>
      // Defer Facebook Pixel loading until after page is interactive
      window.addEventListener('load', function () {
        setTimeout(function () {
          if (window.shouldLoadAnalytics) {
            !(function (f, b, e, v, n, t, s) {
              if (f.fbq) return;
              n = f.fbq = function () {
                n.callMethod
                  ? n.callMethod.apply(n, arguments)
                  : n.queue.push(arguments);
              };
              if (!f._fbq) f._fbq = n;
              n.push = n;
              n.loaded = !0;
              n.version = "2.0";
              n.queue = [];
              t = b.createElement(e);
              t.async = !0;
              t.src = v;
              s = b.getElementsByTagName(e)[0];
              s.parentNode.insertBefore(t, s);
            })(
              window,
              document,
              "script",
              "https://connect.facebook.net/en_US/fbevents.js"
            );
            fbq("init", "1940362026887774");
            fbq("track", "PageView");

            console.log("[Analytics] Facebook Pixel enabled");
          }
        }, 2000); // 2 second delay
      });
    </script>
    <!-- End Facebook Pixel Code -->

    <!-- Schema.org Structured Data (JSON-LD) -->
    <!-- Organization Schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Arcades Box",
        "url": "https://www.arcadesbox.com/",
        "logo": "https://www.arcadesbox.com/favicon.svg",
        "description": "Play free online arcade, puzzle, sports and action games on Arcades Box. Instant play, no downloads, and new games added regularly.",
        "sameAs": []
      }
    </script>

    <!-- WebSite Schema with Search Action -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Arcades Box",
        "url": "https://www.arcadesbox.com/",
        "description": "Play free online arcade, puzzle, sports and action games on Arcades Box",
        "potentialAction": {
          "@type": "SearchAction",
          "target": {
            "@type": "EntryPoint",
            "urlTemplate": "https://www.arcadesbox.com/?search={search_term_string}"
          },
          "query-input": "required name=search_term_string"
        }
      }
    </script>

    <!-- Google Ads Conversion Tag (gtag.js) - MIGRATED TO ZARAZ -->
    <!-- <script defer>
      // Defer Google Ads loading until after page is interactive
      window.addEventListener('load', function () {
        setTimeout(function () {
          if (window.shouldLoadAnalytics) {
            // Load Google Ads script dynamically
            const adsScript = document.createElement("script");
            adsScript.async = true;
            adsScript.src =
              "https://www.googletagmanager.com/gtag/js?id=AW-17063551057";
            document.head.appendChild(adsScript);

            // Reuse existing gtag function if available, otherwise create it
            window.dataLayer = window.dataLayer || [];
            if (typeof window.gtag === "undefined") {
              window.gtag = function () {
                dataLayer.push(arguments);
              };
            }

            // Configure Google Ads conversion tag
            gtag("config", "AW-17063551057");

            console.log("[Analytics2] Google Ads conversion tag enabled");
          }
        }, 2000); // 2 second delay
      });
    </script> -->

    <!-- Speed Vitals Performance Monitoring - DISABLED: Causing 4s delay + 404 errors -->
    <!-- <script data-rum-site-id="d609beeb-0dcd-4229-9946-16b3705c7bda" src="https://assets.speedvitals.com/vitals.min.js" defer></script> -->
  </head>

  <body class="">
    <!-- Facebook Pixel Noscript - Conditionally Loaded -->
    <script>
      if (window.shouldLoadAnalytics) {
        document.write(
          '<noscript><img height="1" width="1" src="https://www.facebook.com/tr?id=1940362026887774&ev=PageView&noscript=1" /></noscript>'
        );
      }
    </script>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
